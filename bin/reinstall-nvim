#!/usr/bin/env bash

find ${HOME}/.cache/vim/* -maxdepth 0 -path ${HOME}/.cache/vim/undo -prune -o -path ${HOME}/.cache/vim/session -prune -o -print -exec rm -rf {} \;

brew install python3
# brew install ruby
# brew unlink ruby
# brew link --overwrite ruby
brew_is_head_version neovim
brew install --HEAD neovim

brew cleanup --prune all --verbose

gem install neovim
pip3 install --user --upgrade virtualenv
pip3 install --user --upgrade pynvim
pip3 install --user --upgrade neovim

cd ~/.config/nvim
git fetch --all
git pull

./venv.sh
~/.cache/vim/venv/bin/pip install neovim || pip install neovim || pip3 install neovim

nvim -c "call dein#clear_state()"
nvim -c "call dein#remote_plugins()"

echo ">>> run in the nvim following commands"
echo ":call dein#clear_state()"
echo ":call dein#remote_plugins()"
